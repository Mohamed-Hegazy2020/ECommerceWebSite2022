@model IEnumerable<MyECommerceWebSite2022.ModelsView.InvoiceMasterViewModel>
@inject MyECommerceWebSite2022.Resources.LocalizationService _localizer

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_AdminLayout2.cshtml";
}
<link href="~/UserAssets/css/fontawesome.min.css" rel="stylesheet" />

<script src="~/UserAssets/js/jquery-1.11.0.min.js"></script>

<a id="Prouductsa" class="nav-link d-none" asp-controller="Invoices" asp-action="SearchInvoices" asp-route-id="">@_localizer.GetLocalizedHtmlString("Products")</a>

<div class="row">
    <div class="col-10">
        <div class="col-md-12 pb-4">
            <div class="d-flex">
                <h3>الطلبيات</h3>
                <select id="srchSlect" class="form-select" asp-items="@(new SelectList(ViewBag.InvoiceSearch,"id","name",Model.Count()>0? Model.FirstOrDefault().SearchId:-1))"></select>
            </div>
        </div>
    </div>
    <div class="col">

        <a id="ProuductsPrint" class="btn btn-primary" asp-controller="Invoices" asp-action="PrintOrders" asp-route-id="@(Model.Count()>0? Model.FirstOrDefault().SearchId:0)"> <i class="fa fa-print"></i> @_localizer.GetLocalizedHtmlString("print")</a>

    </div>
</div>


<table class="table table-responsive" style="font-size:small;">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.customerName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.customerTel)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.customerMobile)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.customerAddress)
            </th>
            @*<th>
                    @Html.DisplayNameFor(model => model.deleverMethod)
                </th>*@

            <th>
                @Html.DisplayNameFor(model => model.paymentMethodName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.invoiceDate)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.InvoiceTotal)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CuruncyName)
            </th>
            @*<th>
                @Html.DisplayNameFor(model => model.PaymentId)
                </th>*@
            <th>
                @Html.DisplayNameFor(model => model.IsPayed)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.IsDeleverd)
            </th>
            @*<th>
                    @Html.DisplayNameFor(model => model.InvoiceStatus)
                </th>*@
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.customerName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.customerTel)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.customerMobile)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.customerAddress)
                </td>
                @*<td>
                        @Html.DisplayFor(modelItem => item.deleverMethod)
                    </td>*@

                <td>
                    @Html.DisplayFor(modelItem => item.paymentMethodName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.invoiceDate)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.InvoiceTotal)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CuruncyName)
                </td>
                @*<td>
                        @Html.DisplayFor(modelItem => item.PaymentId)
                    </td>*@
                <td>
                    @Html.DisplayFor(modelItem => item.IsPayed)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.IsDeleverd)
                </td>
                @*<td>
                        @Html.DisplayFor(modelItem => item.InvoiceStatus)
                    </td>*@
                <td>
                    @Html.ActionLink(@_localizer.GetLocalizedHtmlString("Details"), "Details", new { id = item.id })|
                    @Html.ActionLink(@_localizer.GetLocalizedHtmlString("Edit"), "Edit", new { id = item.id }) |
                    @Html.ActionLink(@_localizer.GetLocalizedHtmlString("print"), "PrintInvoice", new { id = item.id })

                </td>
            </tr>
        }
    </tbody>
</table>

<script>
    $(document).ready(function () {
        $("#srchSlect").on("change", function () {
            debugger
            var id = $(this).val();
            //var $linkPrint = $('#ProuductsPrint');
            //var hrefPrint = $linkPrint.attr('href').split('/');
            //hrefPrint[3] = id; //here you set your new asp-route-id value
            //$linkPrint.attr('href', hrefPrint.join('/'));



            var $link = $('#Prouductsa');
            var href = $link.attr('href').split('/');
            href[3] = id; //here you set your new asp-route-id value
            $link.attr('href', href.join('/'));
            $('#Prouductsa')[0].click();

        });


    });

</script>
